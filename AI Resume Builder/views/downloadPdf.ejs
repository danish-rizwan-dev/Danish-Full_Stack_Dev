<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Preview | AI Resume Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>  
    body {
      margin: 60px 60px 50px 50px; ;
    }
    .resume {
        background: white;
        padding: 10px;
        max-width: 794px; 
    }

      header h1 {
        font-size: 32px;
        font-weight: bold;
        margin-bottom: 5px;
      }

      header p {
        margin: 3px 0;
        font-size: 15px;
      }

      section {
        margin-top: 30px;
      }

      section h2 {
        font-size: 20px;
        border-bottom: 2px solid #007bff;
        padding-bottom: 5px;
        margin-bottom: 15px;
        color: #007bff;
      }

      ul {
        list-style: none;
        padding: 0;
      }

      li {
        margin-bottom: 20px;
      }

      li p {
        margin-top: 5px;
        font-size: 14px;
      }

      footer {
        margin-top: 40px;
        text-align: center;
        font-size: 14px;
        color: #666;
      }

      .submit-group button {
        margin: 0 10px;
        padding: 10px 20px;
        font-weight: bold;
        border-radius: 5px;
        font-size: 16px;
      }

      .submit-group img {
        height: 20px;
        margin-right: 5px;
        vertical-align: middle;
      }

      .submit-group button#saveBtn {
        background-color: #007bff;
        color: white;
        border: none;
      }

      .submit-group button.btn-success {
        background-color: #28a745;
        border: none;
      }
    </style>
  </head>
  <body>
    <% if(userDetails && professionalExperience && education && skills){ %>
    <div class="resume container-fluid">
      <form>
        <header class="text-center mb-4">
          <h1><%= userDetails.name %></h1>
          <p><%= userDetails.job_title %></p>
          <p>Email: <%= userDetails.email %> | Phone: <%= userDetails.phone %></p>
          <p>Address: <%= userDetails.address %></p>
        </header>

        <section>
          <h2>Professional Experience</h2>
          <ul>
            <% professionalExperience.forEach(function(exp) { %>
              <li>
                <strong><%= exp.position_title %></strong><br>
                <%= exp.company_name %> â€” <%= exp.city %>, <%= exp.state %> <br>
                <em><%= new Date(exp.start_date).toISOString().substring(0, 10) %> - <%= new Date(exp.end_date).toISOString().substring(0, 10) %></em>
                <p><%= exp.summary %></p>
              </li>
            <% }); %>
          </ul>
        </section>

        <section>
          <h2>Education</h2>
          <ul>
            <% education.forEach(function(edu) { %>
              <li>
                <strong><%= edu.degree %> - <%= edu.institute_name %></strong><br>
                <%= edu.state %> <br>
                <em><%= new Date(edu.start_date).toISOString().substring(0, 10) %> - <%= new Date(edu.end_date).toISOString().substring(0, 10) %></em>
                <p><%= edu.description %></p>
              </li>
            <% }); %>
          </ul>
        </section>

        <section>
          <h2>Skills</h2>
          <ul>
            <% skills.forEach(function(skill) { %>
              <li><strong><%= skill.name %></strong>: <%= skill.description %></li>
            <% }); %>
          </ul>
        </section>
      </form>
      <% }else{%>
      <div class="text-center mt-5">
        <h2 class="text-light">Please complete your resume details first!</h2>
        <p class="text-light">Make sure to fill out all sections: Personal Details, Professional Experience, Education, and Skills.</p>
    </div>
        <% } %>
  </body>
</html>
