<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task Manager</title>
    <link rel="stylesheet" href="/public/css/signup.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>

  <body>
    <%- include('components/navbar', { flag, userLoggedIn: isAuth }) %>
    <nav class="container py-3">
      <ul class="nav">
        <li class="nav-item">
          <a
            href="http://localhost:8000/addtask"
            class="nav-link btn btn-success text-light px-4"
            style="width: 120px;"
          >
            Add Task
          </a>
        </li>
      </ul>
    </nav>

    <div class="content">
      <div class="container px-4" id="custom-cards">
        <h2 class="pb-2 border-bottom">Your Tasks</h2>
        <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5">
          <% tasks.forEach((task) => { %>
            <div class="col">
              <div
                class="card card-cover h-100 overflow-hidden text-bg-light rounded-4 shadow-lg"
                style="background-image: url('<%= task.imgLink %>'); background-size: cover;" -->
              >
                <div
                  class="d-flex flex-column h-100 p-5 pb-3 text-dark text-shadow-1"
                   style="background:rgba(255,255,255,0.8);"
                >
                  <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">
                    <%= task.title %>
                  </h3>
                  <p><%= task.description %></p>
                  <div class="mt-auto d-flex justify-content-end gap-2">
                    <a href="/task/edit/<%= task.email %>" class="btn btn-primary btn-sm">Update</a>
                    <form action="/task/delete/<%= task.email %>" method="POST" style="display:inline;">
                      <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this task?');">
                        Delete
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
    </div>

    <script src="/public/routes/dashboard.js"></script>
  </body>
</html>
